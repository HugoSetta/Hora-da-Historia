<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Hora da História</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

       
       
       <style>
           #bod{
               background-color: #f0f0f0;
               color: #455A64;
               font-family: Georgia, 'Times New Roman', Times, serif;
               
           }
           
           h1{
               font-family: Arial, Helvetica, sans-serif;
           }
           #mid p{
               font-size: 1.3em;
               line-height: 1.35em;
           }
           #mid a{
               text-decoration: none;
               color: #455A64;
           }
       </style>
       
    </head>
    <body id="bod">
       <div id="top">
           <h1>Hora da História</h1>
           <span onclick="geraLista()" id="voltar-lista">&#8617; Voltar pra lista</span>
       </div>
       <div id="disclaimer">
           <p>Bem vindo(a) ao Hora da História. Reuno aqui algumas histórias infantis para serem lidas pelos pais e mães na hora de deitar seus filhos. Bem como para que as crianças que estão aprendendo possam também ler antes de deitar. O objetivo é apresentar as histórias para serem lidas na tela do celular ou do tablet, sem distrações. A estrutura do texto e o design dos detalhes, como fonte e espaçamentos, foi pensado para dar o melhor conforto à leitura.</p>
          
          <p>Este é um trabalho em constante andamento. Novas histórias continuarão sendo adicionadas. Erros sendo corrigidos. Caso você tenha uma história original que queira adicionar aqui, sinta-se a vontade para entrar em contato. Este é um projeto de código aberto, disponível no GitHub.</p>
          
          <p onclick="geraLista()">Toque para começar</p>
          
          <p>Projeto no GitHub: xxx</p>
          <p>Contato: xxx</p>
          
       </div>
       <div id="mid">
           
          
          
          
           
       </div>
       <div id="bot" onclick="voltarTopo()">Voltar pro topo</div>
       
       
        <script>
        
        
var historias = [
    
    {
        "Titulo":"Branca de Neve e os Sete Anões",
        "Duracao":3,
        "Autor":"Irmãos Grimm",
        "Fonte":"https://bebeatual.com/historias-branca-de-neve-e-os-sete-anoes_52",
        "Texto":"<p>Era uma vez um rei que vivia num reino distante, com a sua filha pequena, que se chamava Branca de Neve. O rei, como se sentia só, voltou a casar, achando que também seria bom para a sua filha ter uma nova mãe. A nova rainha era uma mulher muito bela mas também muito má e não gostava de Branca de Neve que, quanto mais crescia, mais bela se tornava.</p><p>A rainha malvada tinha um espelho mágico, ao qual perguntava, todos os dias:</p><p>- Espelho meu, espelho meu, haverá mulher mais bela do que eu?</p><p>E o espelho respondia:</p><p>- Não minha rainha, és tu a mulher mais bela!</p><p>Mas uma manhã, a rainha voltou a perguntar o mesmo ao espelho e este respondeu:</p><p>- Tu és muito bonita minha rainha, mas Branca de Neve é agora a mais bela!</p><p>Enraivecida, a rainha ordenou a um dos seus servos que levasse Branca de Neve até à floresta e a matasse, trazendo-lhe de volta o seu coração, como prova.</p><p>Mas o servo teve pena da Branca de Neve e disse-lhe para fugir em direcção à floresta e nunca mais voltar ao reino.</p><p>Já na floresta, Branca de Neve conheceu alguns animais, os quais se tornaram seus amigos. Também encontrou uma pequenina casa e bateu a sua porta. Como ninguém respondeu e a porta não estava fechada à chave, entrou. Era uma casa muito pequena, que tinha sete caminhas, todas muito pequeninas, assim como as cadeiras, a mesa e tudo o mais que se encontrava na casa. Também estava muito suja e desarrumada, e Branca de Neve decidiu arrumá-la. No fim, como estava muito cansada, deitou-se nas pequenas camas, que colocou todas juntas, e adormeceu.</p><p>A casa era dos sete anões que viviam na floresta e, durante o dia, trabalhavam numa mina.</p><p>Ao anoitecer, os sete anões regressavam à sua casinha, quando deram com Branca de Neve, adormecida nas suas caminhas. Que surpresa! Com tanta excitação, Branca de Neve acordou, espantada e rapidamente se apresentou:</p><p>- Eu sou a Branca de Neve.</p><p>E os sete anões, todos contentes, também se apresentaram:</p><p>- Eu sou o Feliz!</p><p>- Eu sou o Atchim e este é o Miudinho.</p><p>- Eu sou o Sabichão, e estes são o Dorminhoco e o Envergonhado.</p><p>- E eu sou o Rezingão!</p><p>- Prazer em conhecê-los. Respondeu Branca de Neve, e logo contou a sua triste história. Os anões convidaram Branca de Neve a viver com eles e ela aceitou, prometendo-lhes que tomaria conta da casa deles.</p><p>Mas a rainha má, através do seu espelho mágico, descobriu que Branca de Neve estava viva e que vivia na floresta com os anões.</p><p>Então, furiosa, vestiu-se de senhora muito velha e feia e foi ter com Branca de Neve. Com ela levou um cesto de maças, no qual tinha colocado uma maça vermelha que estava envenenada!</p><p>Quando viu Branca de Neve, cumprimentou-a gentilmente, e ofereceu-lhe a maça que tinha veneno.</p><p>Ao trincá-la, Branca de Neve caiu, como se estivesse morta. A malvada rainha fugiu e, avisados pelos animais do bosque, os sete anões regressam apressadamente a casa, encontrando Branca de Neve caída no chão.</p><p>Muito chorosos, os anões colocam Branca de Neve numa caixa de vidro, rodeada por flores.</p><p>Estavam todos em volta de Branca de Neve, quando surgiu, no meio do bosque, um príncipe no seu cavalo branco. Ao ver Branca de Neve, o príncipe de imediato se apaixonou por ela e, num impulso, beijo-a. Branca de Neve acordou: Afinal estava viva!</p><p>Os anões saltaram de alegria e Branca de Neve ficou maravilhada com o príncipe!</p><p>O príncipe levou Branca de Neve para o seu castelo, onde casaram e viveram muito felizes para sempre.</p>"
    },
     {
        "Titulo":"A Princesa e a Ervilha",
        "Duracao":3,
        "Autor":"Hans Christian Andersen",
        "Fonte":"https://bebeatual.com/historias-princesa-e-a-ervilha_97",
        "Texto":"<p>Era uma vez um príncipe que viajou pelo mundo inteiro à procura da princesa ideal para se casar. Tinha de ser linda e de sangue azul, uma verdadeira princesa!</p><p>Mas depois de muitos meses a viajar de país em país, o príncipe voltou para o seu reino, muito triste e abatido pois não tinha conseguido encontrar a princesa que se tornaria sua mulher.</p><p>Numa noite fria e escura de inverno, quando o príncipe já pensava ser impossível casar com uma princesa, houve uma terrível tempestade. No meio da tempestade, alguém bateu à porta do castelo. O velho rei intrigado foi abrir a porta. Qual não foi a sua surpresa ao ver uma bela menina completamente molhada da cabeça aos pés.</p><p>A menina disse: “Poderei passar a noite aqui no seu castelo, senhor? Fui surpreendida pela tempestade enquanto viaja já de volta para o meu reino. Estou com fome e frio e não tenho onde ficar…”.</p><p>O rei desconfiado perguntou: Sois uma princesa? A princesa respondeu timidamente: \"Sim, senhor\".</p><p>“Então entrai, pois seria imperdoável da minha parte deixar-vos lá fora numa noite como esta!” Respondeu o rei, não muito convencido de se tratar mesmo de uma princesa.</p><p>Enquanto a princesa se secava e mudava de roupa, o rei informou a rainha daquela visita inesperada. A rainha pôs-se a pensar e com um sorriso matreiro, disse \"vamos já descobrir se se trata de uma verdadeira princesa ou não…\".</p><p>A rainha subiu ao quarto de hóspedes onde ia ficar a princesa e, sem ninguém ver, tirou a roupa de cama e colocou por baixo do colchão uma ervilha. De seguida colocou por cima da cama mais vinte colchões e edredões e, finalmente, a roupa de cama.</p><p>Então, desceu a escadaria e dirigiu-se à princesa, apresentando-se e dizendo amavelmente: Já pode subir e descansar. Amanhã falaremos com mais calma sobre a menina e o seu reino.</p><p>A princesa subiu e deitou-se naquela cama estranha que mais parecia uma montanha! </p><p>Na manhã seguinte, a princesa desceu para tomar o pequeno almoço. O rei e a rainha já estavam sentados à mesa. A princesa saudou os reis e sentou-se. Então a rainha perguntou: Como passou a noite, princesa?</p><p>A princesa respondeu: \"Oh, a verdade é que não consegui dormir nada naquela cama tão incomoda… senti qualquer coisa no colchão que me incomodou toda a noite e deixou o meu corpo todo dorido!</p><p>O rei levantou-se e, muito ofendido, exclamou: “Impossível! Nunca nenhum convidado se queixou dos nossos excelentes colchões de penas!\"</p><p>Mas a rainha interrompe-o e disse com um sorriso: “Pode sim!” E explicou ao rei o que tinha feito para ver se realmente se tratava de uma princesa ou alguém a querer enganá-los. </p><p>A rainha levantou-se e disse a todos: \"Só uma verdadeira princesa com uma pele tão sensível e delicada é capaz de sentir o incomodo de uma ervilha através de vinte colchões e edredões!\"</p><p>O rei e a rainha apresentaram a princesa ao seu filho o príncipe e ele, mal a viu, ficou logo perdido de amores.</p><p>Ao fim de alguns dias, o príncipe casou com a princesa, com a certeza de ter encontrado finalmente uma princesa verdadeira que há tanto tempo procurava.</p><p>A partir daquele dia, a ervilha passou a fazer parte das joias da coroa, para que todos se lembrassem da história da princesa ervilha.</p>"
     }
];

var historiasTotal = historias.length;

function pegaLetra(frase){
    var forbiden = ["A","O","As","Os"];
    var f = frase.split(" ");
    var firstWord = f[0];
    if(f.length > 1){
        for(var j=0;j<forbiden.length;j++){
            if(firstWord == forbiden[j]){
                firstWord = f[1];
            }
        }
    }
    var letra = firstWord.charAt(0).toUpperCase();
    return letra;
   
}

function limpaBoasvindas(){
    document.getElementById("disclaimer").style.display = "none";
}

function voltarlista(status){
    if(status == "on"){
        document.getElementById("voltar-lista").style.display = "block";
    }else{
        document.getElementById("voltar-lista").style.display = "none";
    }
}

function geraLista(){
       
    limpaBoasvindas();
    voltarlista("off");
    document.getElementById("mid").style.display = "block";
    
    
    var template = `
        <span onclick="geraTexto(XXXIDXXX)">
            <span class="list-title">XXXTITULOXXX</span>
            <span class="list-time">XXXTIMEXXX min.</span>
        </span>
    `;
    
    var templateLetra = `
        <span class="list-letra">XXXLETRAXXX</span>
    `;
    
    var letraAtual = "";    //Guarda a letra atual da ordem alfabética
    var result = "";        //Resultado a ser exibido
       
    for(var i=0;i<historiasTotal;i++){
        
        var historiaAtual = historias[i];
        
        //Letra
        if(letraAtual != pegaLetra(historiaAtual["Titulo"])){
            letraAtual = pegaLetra(historiaAtual["Titulo"]);
            result += templateLetra.replace("XXXLETRAXXX",letraAtual);
        } 
        
        //Historias
        result += template.replace("XXXIDXXX",i)
                  .replace("XXXTITULOXXX",historiaAtual["Titulo"])
                  .replace("XXXTIMEXXX",historiaAtual["Duracao"])
        
    }
    document.getElementById("mid").innerHTML = result;
    
    
    
    
}

function geraTexto(id){
    
    voltarlista("on");
    
    var historiaAtual = historias[id];
    var template = `
        <h1>XXXTITULOXXX</h1>
        <h2>XXXAUTORXXX, XXXTEMPOXXX minutos de leitura.</h2>
        <a href="XXXLINKXXX" target="_blank">Origem da publicação &#8618</a>
        XXXTEXTOXXX
    `; 
    var autor = historiaAtual["Autor"];
        if(autor == ""){ autor = "Autor desconhecido"; }
    
    var result = template.replace("XXXTITULOXXX",historiaAtual["Titulo"])
                 .replace("XXXAUTORXXX",autor)
                 .replace("XXXTEMPOXXX",historiaAtual["Duracao"])
                 .replace("XXXLINKXXX",historiaAtual["Fonte"])
                 .replace("XXXTEXTOXXX",historiaAtual["Texto"]);
    
    document.getElementById("mid").innerHTML = result;
                 
}

function voltarTopo(){
    window.scrollTo(0, 0);
}


/*
Recursos

HTML Minifyer
    https://www.willpeavy.com/minifier/

Tempo de leitura
    http://niram.org/read/
    
 
*/
          
        </script>
        
    </body>
</html>
